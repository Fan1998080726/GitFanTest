<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace ="dept" > 


   <typeAlias alias ="deptVo" type ="com.sdkj.system.vo.DeptVo"/> 
   <typeAlias alias ="userVo" type ="com.sdkj.system.vo.UserInfo"/> 

  	<select id ="selectUserByDept" resultClass="userVo" parameterClass ="java.lang.String"  > 
    	$value$
    </select > 
   
   
   	<select id="selectUserByDeptCount" parameterClass="java.lang.String" resultClass="int">
		select count(*) as ucount from ($value$)
	</select>
	
	
   	<select id="querydeptcount" parameterClass="deptVo" resultClass="int">
		select count(*) from system_dept_info
            where dept_name = #dept_name#
             and   dept_id != #dept_id#
	</select>
	
	
   	<select id="querydeptMax" parameterClass="java.lang.String" resultClass="int">
			$value$
	</select>
  	<select id ="findDept" resultClass="deptVo" parameterClass ="java.lang.String"  > 
    	$value$
    </select > 
   
   	<select id="findDeptListCount" parameterClass="java.lang.String" resultClass="int">
		select count(*) as deptunt from ($value$)
	</select>
	
	<update id="addDept" parameterClass="deptVo">
		insert into system_dept_info (dept_id,dept_name,dept_describe,dept_app_user)
		values (#dept_id#,#dept_name#,#dept_describe#,#dept_app_user#)
	</update>
	
	<update id="updateDept" parameterClass="deptVo">
		update system_dept_info 
		set dept_name=#dept_name#,
		dept_describe=#dept_describe#
		where dept_id=#dept_id#
	</update>
	
	<select id="getDeptById" parameterClass="long" resultClass="deptVo">
		select dept_id,dept_name,dept_describe,dept_app_user from system_dept_info where dept_id=#dept_id#
	</select>
	
	<update id="updateAppUser" parameterClass="java.util.HashMap">
		update system_dept_info set dept_app_user=#userId# where dept_id=#deptId#
	</update>
	
	<update id="delDept" parameterClass="java.lang.String">
		delete from system_dept_info where dept_id=#dept_id#
	</update>
</sqlMap > 

