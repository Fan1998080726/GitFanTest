<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace ="RealView" > 

   	<typeAlias alias ="realView" type ="com.sdkj.project.vo.RealViewVo"/> 
   
	<select id="queryRealViewList" parameterClass="String" resultClass="realView">
		$value$
	</select>
	<select id="getRealViewCount" resultClass="int" parameterClass="String">
		select count(*) from ($value$) as ucount
	</select>
	<insert id="addRealView" parameterClass="realView">
		INSERT INTO real_view (
			real_name,
			real_url,
			real_remark,
			real_date,
			pro_id,
			real_user,SysTime
		)VALUES(
			#realName#,
			#realUrl#,
			#realRemark#,
			now(),
			#proId#,
			#realUser#,#SysTime#
		)
	</insert>
	<update id="updRealView" parameterClass="realView">
		update real_view 
		set real_name=#realName#,real_url=#realUrl#,real_remark=#realRemark#,real_date=now(),real_user=#realUser#
		where real_id = #realId#
	</update>
	<delete id="delRealView" parameterClass="String">
		delete from real_view where real_id in ($id$)
	</delete>
	<select id="queryRealView" parameterClass="String" resultClass="realView">
		select 
			t1.real_id 'realId',
			t1.real_name 'realName',
			t1.real_url 'realUrl',
			t1.real_remark 'realRemark',
			cast(date_format(t1.real_date,'%Y-%m-%d %H:%i:%s') as char(19)) 'realDate',
			t1.pro_id 'proId',
			t1.real_user 'realUser',
			t2.user_name 'realUserName'
		from real_view t1,system_user_info t2
		where real_id = #id# and t1.real_user = t2.id
	</select>
</sqlMap > 
